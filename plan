# InterSoccer Reports & Rosters Plugin - New Directory Structure

## Proposed Directory Structure

```
intersoccer-reports-rosters/
├── intersoccer-reports-rosters.php          # Main plugin file (existing)
├── uninstall.php                            # Plugin uninstall hook
├── composer.json                            # Composer configuration for autoloading
├── README.md                               # Updated documentation
├── CHANGELOG.md                            # Version changelog
│
├── assets/                                 # Static assets
│   ├── css/
│   │   ├── styles.css                      # Existing styles
│   │   ├── admin.css                       # New admin-specific styles
│   │   └── charts.css                      # Chart-specific styles
│   ├── js/
│   │   ├── overview-charts.js              # Existing overview charts
│   │   ├── rosters-tabs.js                 # Existing roster tabs
│   │   ├── advanced-ajax.js                # Existing advanced AJAX
│   │   ├── export-ajax.js                  # Existing export AJAX
│   │   ├── woo-op.js                       # Existing WooCommerce orders
│   │   └── admin.js                        # New general admin JS
│   └── images/
│       └── icons/                          # Plugin icons and images
│
├── classes/                                # New OOP structure
│   ├── Core/
│   │   ├── Plugin.php                      # Main plugin class
│   │   ├── Activator.php                   # Plugin activation handler
│   │   ├── Deactivator.php                 # Plugin deactivation handler
│   │   ├── Dependencies.php                # Dependency checker
│   │   ├── Database.php                    # Database operations
│   │   └── Logger.php                      # Centralized logging
│   │
│   ├── Admin/
│   │   ├── MenuManager.php                 # Admin menu management
│   │   ├── AssetManager.php                # CSS/JS enqueue management
│   │   ├── AdminNotices.php                # Admin notices handler
│   │   └── PermissionManager.php           # User permission checks
│   │
│   ├── Data/
│   │   ├── Models/
│   │   │   ├── AbstractModel.php           # Base model class
│   │   │   ├── Player.php                  # Player data model
│   │   │   ├── Order.php                   # WooCommerce order model
│   │   │   ├── Event.php                   # Event/product model
│   │   │   └── Roster.php                  # Roster data model
│   │   ├── Repositories/
│   │   │   ├── RepositoryInterface.php     # Repository pattern interface
│   │   │   ├── PlayerRepository.php        # Player data repository
│   │   │   ├── OrderRepository.php         # Order data repository
│   │   │   ├── EventRepository.php         # Event data repository
│   │   │   └── RosterRepository.php        # Roster data repository
│   │   └── Collections/
│   │       ├── AbstractCollection.php      # Base collection class
│   │       ├── PlayersCollection.php       # Players collection
│   │       ├── OrdersCollection.php        # Orders collection
│   │       └── RostersCollection.php       # Rosters collection
│   │
│   ├── Services/
│   │   ├── RosterBuilder.php               # Roster generation service
│   │   ├── DataValidator.php               # Data validation service
│   │   ├── EventMatcher.php                # Match orders to events
│   │   ├── PlayerMatcher.php               # Match players to orders
│   │   ├── PricingCalculator.php           # Pricing and discount logic
│   │   └── CacheManager.php                # Data caching service
│   │
│   ├── Export/
│   │   ├── ExporterInterface.php           # Export interface
│   │   ├── AbstractExporter.php            # Base exporter class
│   │   ├── ExcelExporter.php               # Excel export functionality
│   │   ├── CsvExporter.php                 # CSV export functionality
│   │   ├── GoogleSheetsExporter.php        # Future Google Sheets API
│   │   └── Office365Exporter.php           # Future Office365 API
│   │
│   ├── Reports/
│   │   ├── ReportInterface.php             # Report interface
│   │   ├── AbstractReport.php              # Base report class
│   │   ├── OverviewReport.php              # Overview dashboard report
│   │   ├── CampReport.php                  # Camp-specific reports
│   │   ├── CourseReport.php                # Course-specific reports
│   │   ├── AnalyticsReport.php             # Analytics and metrics
│   │   └── CustomReport.php                # Custom report builder
│   │
│   ├── WooCommerce/
│   │   ├── OrderProcessor.php              # Process WooCommerce orders
│   │   ├── ProductVariationHandler.php     # Handle product variations
│   │   ├── MetaDataExtractor.php           # Extract order metadata
│   │   ├── DiscountCalculator.php          # Calculate sibling discounts
│   │   └── HooksManager.php                # WooCommerce hooks integration
│   │
│   ├── UI/
│   │   ├── Pages/
│   │   │   ├── AbstractPage.php            # Base page class
│   │   │   ├── OverviewPage.php            # Overview dashboard
│   │   │   ├── ReportsPage.php             # Reports page
│   │   │   ├── RostersPage.php             # Base rosters page
│   │   │   ├── CampsPage.php               # Camps roster page
│   │   │   ├── CoursesPage.php             # Courses roster page
│   │   │   ├── GirlsOnlyPage.php           # Girls-only events page
│   │   │   ├── OtherEventsPage.php         # Other events page
│   │   │   ├── AdvancedPage.php            # Advanced tools page
│   │   │   └── RosterDetailsPage.php       # Roster details page
│   │   ├── Components/
│   │   │   ├── TabsComponent.php           # Reusable tabs component
│   │   │   ├── FiltersComponent.php        # Filter components
│   │   │   ├── ChartsComponent.php         # Chart components
│   │   │   ├── TableComponent.php          # Data table components
│   │   │   └── ExportComponent.php         # Export buttons/forms
│   │   └── Renderers/
│   │       ├── TableRenderer.php           # Render data tables
│   │       ├── ChartRenderer.php           # Render charts
│   │       └── FormRenderer.php            # Render forms
│   │
│   ├── Utils/
│   │   ├── DateHelper.php                  # Date manipulation utilities
│   │   ├── StringHelper.php                # String manipulation utilities
│   │   ├── ArrayHelper.php                 # Array manipulation utilities
│   │   ├── ValidationHelper.php            # Validation utilities
│   │   └── DebugHelper.php                 # Debug and logging utilities
│   │
│   ├── Ajax/
│   │   ├── AjaxHandler.php                 # Base AJAX handler
│   │   ├── RosterAjaxHandler.php           # Roster-specific AJAX
│   │   ├── ExportAjaxHandler.php           # Export-specific AJAX
│   │   ├── ReportAjaxHandler.php           # Report-specific AJAX
│   │   └── AdvancedAjaxHandler.php         # Advanced tools AJAX
│   │
│   └── Exceptions/
│       ├── PluginException.php             # Base plugin exception
│       ├── DatabaseException.php           # Database-related exceptions
│       ├── ValidationException.php         # Validation exceptions
│       ├── ExportException.php             # Export-related exceptions
│       └── PermissionException.php         # Permission exceptions
│
├── templates/                              # Template files
│   ├── admin/
│   │   ├── overview.php                    # Overview page template
│   │   ├── reports.php                     # Reports page template
│   │   ├── rosters.php                     # Base rosters template
│   │   ├── camps.php                       # Camps template
│   │   ├── courses.php                     # Courses template
│   │   ├── girls-only.php                  # Girls-only template
│   │   ├── other-events.php                # Other events template
│   │   ├── advanced.php                    # Advanced tools template
│   │   └── roster-details.php              # Roster details template
│   ├── components/
│   │   ├── tabs.php                        # Tabs component template
│   │   ├── filters.php                     # Filters template
│   │   ├── table.php                       # Data table template
│   │   ├── charts.php                      # Charts template
│   │   └── export-form.php                 # Export form template
│   └── emails/
│       └── roster-notification.php         # Email templates (future)
│
├── config/                                 # Configuration files
│   ├── settings.php                        # Plugin settings/constants
│   ├── database-schema.php                 # Database table definitions
│   └── permissions.php                     # User role/permission definitions
│
├── includes/                               # Legacy includes (existing)
│   ├── event-reports.php                   # Keep for backwards compatibility
│   ├── reports.php                         # Keep for backwards compatibility
│   ├── utils.php                           # Keep for backwards compatibility
│   ├── rosters.php                         # Keep for backwards compatibility
│   ├── roster-data.php                     # Keep for backwards compatibility
│   ├── roster-details.php                  # Keep for backwards compatibility
│   ├── roster-export.php                   # Keep for backwards compatibility
│   ├── advanced.php                        # Keep for backwards compatibility
│   ├── woocommerce-orders.php              # Keep for backwards compatibility
│   └── db.php                              # Keep for backwards compatibility
│
├── tests/                                  # Test files
│   ├── unit/                               # PHPUnit tests
│   │   ├── Core/
│   │   ├── Data/
│   │   ├── Services/
│   │   ├── Export/
│   │   └── Utils/
│   ├── integration/                        # Integration tests
│   │   ├── WooCommerce/
│   │   └── Database/
│   ├── e2e/                                # Cypress E2E tests
│   │   ├── rosters.cy.js
│   │   ├── exports.cy.js
│   │   └── reports.cy.js
│   └── fixtures/                           # Test data fixtures
│       ├── orders.json
│       ├── players.json
│       └── products.json
│
├── migrations/                             # Database migrations
│   ├── 001_create_rosters_table.php
│   ├── 002_add_indexes.php
│   └── 003_add_cache_columns.php
│
└── vendor/                                 # Composer dependencies (if any)
```

## Key Design Principles

### 1. **Object-Oriented Architecture**
- **Single Responsibility Principle**: Each class has one clear purpose
- **Interface Segregation**: Small, focused interfaces
- **Dependency Injection**: Classes receive dependencies rather than creating them
- **Repository Pattern**: Data access abstraction
- **Service Layer**: Business logic separation

### 2. **Error Handling & Debugging**
- **Custom Exception Classes**: Specific exception types for different error scenarios
- **Centralized Logging**: Logger class with different log levels
- **Debug Helper**: Utilities for development debugging
- **Validation Layer**: Comprehensive data validation

### 3. **Performance & Reliability**
- **Caching Service**: Redis/file-based caching for expensive operations
- **Data Validation**: Multi-layer validation (input, business logic, database)
- **Connection Pooling**: Efficient database operations
- **Lazy Loading**: Load data only when needed

### 4. **Scalability & Maintainability**
- **Plugin Architecture**: Easy to extend with new features
- **Template System**: Separate presentation from logic
- **Configuration Management**: Centralized settings
- **Migration System**: Database schema versioning

### 5. **Testing Strategy**
- **Unit Tests**: Test individual classes/methods
- **Integration Tests**: Test component interactions
- **E2E Tests**: Test complete user workflows
- **Test Fixtures**: Consistent test data

## Implementation Priority

### Phase 1: Core Foundation
1. **Plugin.php** - Main plugin orchestrator
2. **Database.php** - Reliable database operations
3. **Logger.php** - Centralized logging system
4. **Dependencies.php** - Dependency validation

### Phase 2: Data Layer
1. **AbstractModel.php** & specific models
2. **Repository classes** for data access
3. **Collections** for data grouping
4. **Data validation services**

### Phase 3: Business Logic
1. **RosterBuilder.php** - Core roster generation
2. **EventMatcher.php** & **PlayerMatcher.php**
3. **Export services** with multiple formats
4. **Report generation services**

### Phase 4: User Interface
1. **Page classes** for admin interfaces
2. **Component system** for reusable UI elements
3. **AJAX handlers** for dynamic interactions
4. **Template system** implementation

This structure provides:
- **Better reliability** through proper error handling and validation
- **Improved maintainability** with clear separation of concerns  
- **Enhanced debugging** with centralized logging and debug tools
- **Scalable architecture** that can grow with future requirements
- **Backward compatibility** by keeping existing includes